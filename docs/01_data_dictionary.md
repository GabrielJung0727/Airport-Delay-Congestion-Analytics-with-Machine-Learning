# 📚 Raw 데이터 사전

## 1. 보관 원칙
- 저장 위치: `data/raw/<source>/파일명`
- **불변성**: 원본 파일은 절대 수정/삭제하지 않으며, 모든 변환은 `data/interim` 또는 `data/processed`에서 수행한다.
- 명명 규칙: `{source}_{topic}_{from}_{to}.{ext}` 형태의 snake_case.
- 무결성: 각 파일의 SHA-256 해시와 행 수를 본 문서에 기록하고, 변경 시 즉시 원인 파악 후 업데이트한다.

## 2. 파일 인벤토리
| ID | 경로 | 설명 | 기간(UTC) | 행 수 | SHA-256 | 조인 키 후보 |
| --- | --- | --- | --- | --- | --- | --- |
| MOLIT-1 | `data/raw/molit/molit_flights_20231014_20231114.xlsx` | 국토교통부 TAGO 국내선 출·도착 실적 | 2023-10-14 ~ 2023-11-14 | 18,550 | `2213e990ff225e4fc3a87e19db9de2b2d757a76c86a970b50d0c398dff436ee6` | `{일자, 공항명, 편명, 출발/도착}` |
| MOLIT-2 | `data/raw/molit/molit_flights_20231115_20231215.xlsx` | 국토교통부 TAGO 국내선 출·도착 실적 (2차) | 2023-11-15 ~ 2023-12-15 | 18,535 | `8fdda5090436ec754cfb6c84fcdd8ba30260b6bfd96ba1907dc71f52557a3cc6` | `{일자, 공항명, 편명, 출발/도착}` |
| KAC-AIRPORT | `data/raw/kac/kac_airport_stats_20050101_20251215.xlsx` | 한국공항공사 공항별 월별 운항/여객/화물 | 2005-01-01 ~ 2025-12-15 | 24 | `cb64507a68764196b5ae628fd500f42077244fd2e6a17adbe867ac75fe38b17c` | `{공항명, 연도, 월}` |
| KAC-HOURLY | `data/raw/kac/kac_hourly_stats_20050101_20251215.xlsx` | 공항별 시간대별 운항/여객/화물 | 2005-01-01 ~ 2025-12-15 | 32 | `58e47f62d201ed314d65965665d9fe8fe73b45c5f3372d5851769e130a60d0ab` | `{공항명, 시간대}` |
| KAC-WEEKDAY | `data/raw/kac/kac_weekday_stats_20050101_20251215.xlsx` | 공항별 요일별 운항/여객/화물 | 2005-01-01 ~ 2025-12-15 | 15 | `8d48db0c841256f1e50f6e206ddde05b08b465cb8bce87c9b4216b688f1ce762` | `{공항명, 요일}` |
| KAC-TIMESERIES | `data/raw/kac/kac_timeseries_stats_20050101_20251215.xlsx` | 공항/노선 시계열 운항·여객·화물 추이 | 2005-01-01 ~ 2025-12-15 | 280 | `d5a246446f46b4769687aecfcbd4889f98c6e0b08a5340823c87763de3874a2e` | `{공항명, 연도, 월}` |
| ICN-1 | `data/raw/icn/icn_passenger_stats_20100101_20251201.xls` | 인천국제공항 월별 운항/여객/화물 | 2010-01-01 ~ 2025-12-01 | 210 | `3467afddc04410a88ab02bb2a9f849b0d316563afd00e5cb0954e0eea719e27b` | `{연도, 월}` |
| WEATHER(예약) | `data/raw/weather/*.csv` | 기상/좌석계획 CSV (수신 시 추가) | TBD | TBD | TBD | `{공항코드, 일자, 시간}` |

## 3. 데이터셋별 참고 사항

### 3.1 MOLIT 국내선 출·도착
- 주요 컬럼: `출발/도착`, `공항명`, `항공사`, `편명`, `도착지`, `일자`, `계획시간`, `예상시간`, `출발시간`, `구분`, `상태`, `지연원인`.
- 전처리 규칙
  - 공항명/도착지를 IATA/ICAO 코드로 매핑.
  - `계획시간`·`예상시간`·`출발시간`을 HHMM 정수로 통일하고, 타임존 컬럼 추가.
  - `상태` + `지연원인`을 조합해 카테고리형 지연 사유 생성.
- 조인 키: `{편명, 일자, 출발/도착, 계획시간}` 조합을 우선 사용.

### 3.2 KAC 집계 통계 (공항/시간대/요일/시계열)
- 다중 헤더를 2~4행에서 읽어 snake_case로 평탄화 (예: `운항(편)_도착` → `arrivals_flights`).
- 공항별 운항편수·여객·화물 값을 모두 포함하므로, 혼잡도 Feature 계산의 기준 테이블로 사용.
- `airport_code` 컬럼을 추가해 모든 통계에서 일관되게 조인.
- 조인 키
  - 공항별 월 통계: `{airport_code, year, month}`
  - 시간대 통계: `{airport_code, hour_bin}`
  - 요일 통계: `{airport_code, weekday}` (0=월)
  - 시계열 통계: `{airport_code, year, month, route(optional)}`

### 3.3 ICN 승객/운항 통계
- 구형 `.xls` 포맷으로 되어 있으며 `년`, `월`, `운항(편)`, `여객(명)`, `화물(톤)` 열을 포함.
- 인천공항 전용 대시보드의 혼잡도 검증 지표로 사용.
- MOLIT/KAC 자료와 월단위로 비교하여 이상치 여부를 확인한다.

## 4. Raw 데이터 불변성 규칙
- `data/raw/**`는 읽기 전용이다. 어떤 스크립트도 해당 경로의 파일을 덮어쓰거나 삭제해서는 안 된다.
- 변환이 필요하면 read → transform → write 방식으로 `data/interim` 혹은 `data/processed`에 기록한다.
- 신규 데이터가 도착하면 기존 파일 옆에 타임스탬프가 포함된 이름으로 저장하고, 본 문서의 인벤토리 표를 즉시 업데이트한다.
